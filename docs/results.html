<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Results | NYC Yellow Taxi Data</title>
  <meta name="description" content="Chapter 5 Results | NYC Yellow Taxi Data" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Results | NYC Yellow Taxi Data" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Results | NYC Yellow Taxi Data" />
  
  
  

<meta name="author" content="Yiming Li" />


<meta name="date" content="2022-05-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="missing-values.html"/>
<link rel="next" href="interactive-component.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Taxi Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="about-the-data.html"><a href="about-the-data.html"><i class="fa fa-check"></i><b>2</b> About the Data</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC Yellow Taxi Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="results" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Results<a href="results.html#results" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="results.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="results.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb2-3"><a href="results.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb2-4"><a href="results.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-5"><a href="results.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) </span>
<span id="cb2-6"><a href="results.html#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-7"><a href="results.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vcd)</span>
<span id="cb2-8"><a href="results.html#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb2-9"><a href="results.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb2-10"><a href="results.html#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb2-11"><a href="results.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb2-12"><a href="results.html#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="results.html#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#get the data directly from the original source.</span></span>
<span id="cb2-14"><a href="results.html#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="results.html#cb2-15" aria-hidden="true" tabindex="-1"></a>df_2021 <span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;/Users/liyiming/TaxiNYC/dataset/2021_Yellow_Taxi_Trip_Data__Jan-Jul_.csv&quot;</span>)</span>
<span id="cb2-16"><a href="results.html#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="results.html#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb2-18"><a href="results.html#cb2-18" aria-hidden="true" tabindex="-1"></a>sample_2021<span class="ot">&lt;-</span><span class="fu">sample_n</span>(df_2021,<span class="dv">1000000</span>,<span class="at">replace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>At beginning, I will do some data analysis for the basic information of Yellow Taxi Trip
dataset (Jan-July 2021) to get some insights about the distribution of pick-up locations and
the distribution of pick-up time in a day.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="results.html#cb3-1" aria-hidden="true" tabindex="-1"></a>shape <span class="ot">&lt;-</span><span class="fu">read_sf</span>(<span class="st">&quot;/Users/liyiming/TaxiNYC/dataset/taxi_zones/taxi_zones.shp&quot;</span>)</span>
<span id="cb3-2"><a href="results.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="results.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="results.html#cb3-4" aria-hidden="true" tabindex="-1"></a>graph_df<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(df_2021[<span class="st">&quot;PULocationID&quot;</span>]))</span>
<span id="cb3-5"><a href="results.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(graph_df)[<span class="fu">names</span>(graph_df) <span class="sc">==</span><span class="st">&quot;Var1&quot;</span>] <span class="ot">&lt;-</span><span class="st">&quot;LocationID&quot;</span></span>
<span id="cb3-6"><a href="results.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(graph_df)[<span class="fu">names</span>(graph_df) <span class="sc">==</span><span class="st">&quot;Freq&quot;</span>] <span class="ot">&lt;-</span><span class="st">&quot;pick-ups&quot;</span></span>
<span id="cb3-7"><a href="results.html#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="results.html#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="results.html#cb3-9" aria-hidden="true" tabindex="-1"></a>sequence2 <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">263</span>)</span>
<span id="cb3-10"><a href="results.html#cb3-10" aria-hidden="true" tabindex="-1"></a>index<span class="ot">&lt;-</span>sequence2[<span class="dv">1</span><span class="sc">:</span><span class="dv">263</span><span class="sc">%in%</span> graph_df<span class="sc">$</span>LocationID]</span>
<span id="cb3-11"><a href="results.html#cb3-11" aria-hidden="true" tabindex="-1"></a>shape<span class="ot">&lt;-</span>shape[index,]</span>
<span id="cb3-12"><a href="results.html#cb3-12" aria-hidden="true" tabindex="-1"></a>graph_df<span class="ot">&lt;-</span>graph_df[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">251</span>,<span class="dv">252</span>),]</span>
<span id="cb3-13"><a href="results.html#cb3-13" aria-hidden="true" tabindex="-1"></a>graph_df<span class="sc">$</span>LocationID<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(graph_df<span class="sc">$</span>LocationID)</span>
<span id="cb3-14"><a href="results.html#cb3-14" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.2021</span><span class="ot">&lt;-</span><span class="fu">left_join</span>(shape,graph_df)</span>
<span id="cb3-15"><a href="results.html#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="results.html#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(df<span class="fl">.2021</span>) <span class="sc">+</span></span>
<span id="cb3-17"><a href="results.html#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;pick-ups&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Blues&quot;</span>)<span class="sc">+</span></span>
<span id="cb3-18"><a href="results.html#cb3-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_text</span>(<span class="st">&quot;LocationID&quot;</span>, <span class="at">size =</span> .<span class="dv">2</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>*There are so missing areas for pick-ups data, that’s because I did a random
sampling for the original dataset so there might be some records that the sampling
dataset didn’t catch and either the original/sampling dataset doesn’t contain
NAs.</p>
<p>From this map, We can see that most of the pick-up services of Yellow Taxi are
concentrated in Manhattan area and several areas in Brooklyn and Queens. Very less
pick-ups occured in the place like Staten Island and Bronx area. What cause the
sparse distribution of pick-ups in certain areas? I will mainly focus on two factors:
the income level(from the passenger perspective) and crime rate(from the driver
perspective) of certain areas.</p>
<p><img src="income_map.webp" /></p>
<p>Intuitively speaking, there tend to be fewer Taxi pick-ups in low-income areas
because the fare of Taxi is extremely high compared to most of the cities in United
States.</p>
<p>According to the data of US Census Bureau in 2013, 56% of the population of New York
City uses the public transportation system. So hailing a Taxi seems like a thing for
special occasions for most of people living in NYC. As I mentioned earlier, the fare
of Taxi in NYC is extremely high, people who have low income probably won’t choose to
take Taxi instead of they will choose public transportation more in their life since
NYC has one of the largest public transportation systems around the world, so they can
easily hop on a train/bus to the place they want to go rather than paying the extra money.
In the comparison with high-income households, people are more likely to choose take a Taxi
since the time costs for waiting subway/bus etc are much more higher than the money
they spent on taking a Taxi.</p>
<p>So in here, I attached the “NYC median household income distribution map” from Business
Insider as a reference. In this income distribution map, We can see the household with high income
located mainly at Manhattan,the border part of Brooklyn and Queens areas, little part
inside Brooklyn and Staten Island.And the most low-income households concentrated at
Bronx area, middle and lower part of Brooklyn. Compare the pick-up distribution map
and income map, they basically follow the similar pattern: low-income area, low pick-ups.
high-income area, high pick-ups.</p>
<p>However, We can’t see this kind of relationship exists in the grey areas of the income map,
because these grey areas are nonresidential neighborhoods, for example, the lower
part of Brooklyn is Gateway National Recreation Area and the lower part of Queens is
John F.Kennedy International Airport, so that’s why there are still a large number of
pick-ups recorded for these areas even though they don’t follow the relationship
with the income factor.And the other counterintuitive finding from the “distribution
of pick-ups map” is that even though the median income of household in Staten Island is
pretty high, the pick-ups is quite low. According to the “New York City Car Ownership Rates”
data by NYCEDC in 2018, around 83% of all households in Staten Island owns a car and the
ownership of a car is lowest in Manhattan(only 22% of households own a car). To some extent,
this data probably can explain why there are low pick-ups in Staten Island and high
pick-ups in Manhattan from another perspective.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="results.html#cb4-1" aria-hidden="true" tabindex="-1"></a>smpldata<span class="ot">&lt;-</span> <span class="fu">as.factor</span>(sample_2021<span class="sc">$</span>tpep_pickup_datetime)</span>
<span id="cb4-2"><a href="results.html#cb4-2" aria-hidden="true" tabindex="-1"></a>smpltime <span class="ot">&lt;-</span><span class="fu">dmy_hm</span>(<span class="fu">as.character</span>(smpldata))</span>
<span id="cb4-3"><a href="results.html#cb4-3" aria-hidden="true" tabindex="-1"></a>sample_2021<span class="sc">$</span>hour <span class="ot">&lt;-</span><span class="fu">hour</span>(smpltime)</span>
<span id="cb4-4"><a href="results.html#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="results.html#cb4-5" aria-hidden="true" tabindex="-1"></a>hour <span class="ot">&lt;-</span><span class="fu">table</span>(sample_2021<span class="sc">$</span>hour)</span>
<span id="cb4-6"><a href="results.html#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(sample_2021<span class="sc">$</span>hour, <span class="at">main=</span><span class="st">&quot;Distribution of pickup hours&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;pick up time&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;taxi pick ups&quot;</span></span>
<span id="cb4-7"><a href="results.html#cb4-7" aria-hidden="true" tabindex="-1"></a>     ,<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">24</span>),<span class="at">col=</span><span class="st">&quot;light blue&quot;</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>From the distribution of pick-ups for different time in a day, We can see that
Taxi are available 24 hours a day. The peak hours for Taxi pick-ups are from 17:00
to 18:00, that’s probably a lot of people getting off work during that time period.
And we can see the pick-ups steadily rises from 5am (that’s probably because a lot of
people are getting up for the works during that time) until it hits the peak and
then pick-ups drop until it hits another peak at 12am(some people finished their night
shifts,going to the airport/night club/party etc, there are a lot of reasons to
explain where there is a pick-up peak at 12am). Very less pick-ups in the midnight,
because most of people are in the sleep during that time period. So in this graph,
there is no counterintuitive finding.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="results.html#cb5-1" aria-hidden="true" tabindex="-1"></a>taxi5<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">&quot;https://s3.amazonaws.com/nyc-tlc/trip+data/yellow_tripdata_2014-05.csv&quot;</span>)</span>
<span id="cb5-2"><a href="results.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="results.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb5-4"><a href="results.html#cb5-4" aria-hidden="true" tabindex="-1"></a>sample_taxi5<span class="ot">&lt;-</span><span class="fu">sample_n</span>(taxi5,<span class="dv">652435</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-5"><a href="results.html#cb5-5" aria-hidden="true" tabindex="-1"></a>uber5<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">&quot;https://github.com/fivethirtyeight/uber-tlc-foil-response/raw/master/uber-trip-data/uber-raw-data-may14.csv&quot;</span>)</span>
<span id="cb5-6"><a href="results.html#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="results.html#cb5-7" aria-hidden="true" tabindex="-1"></a>taxi5.h<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">format</span>(sample_taxi5<span class="sc">$</span>pickup_datetime,<span class="st">&#39;%H&#39;</span>))</span>
<span id="cb5-8"><a href="results.html#cb5-8" aria-hidden="true" tabindex="-1"></a>uber5.h <span class="ot">&lt;-</span><span class="fu">as.POSIXct</span>(uber5<span class="sc">$</span><span class="st">`</span><span class="at">Date/Time</span><span class="st">`</span>, <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y %H:%M:%S&quot;</span>)</span>
<span id="cb5-9"><a href="results.html#cb5-9" aria-hidden="true" tabindex="-1"></a>uber5.h<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">format</span>(uber5.h, <span class="at">format =</span> <span class="st">&quot;%H&quot;</span>))</span>
<span id="cb5-10"><a href="results.html#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="results.html#cb5-11" aria-hidden="true" tabindex="-1"></a>taxi5.df<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">table</span>(taxi5.h))</span>
<span id="cb5-12"><a href="results.html#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(taxi5.df)[<span class="fu">names</span>(taxi5.df) <span class="sc">==</span><span class="st">&quot;taxi5.h&quot;</span>] <span class="ot">&lt;-</span><span class="st">&quot;Hour&quot;</span></span>
<span id="cb5-13"><a href="results.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(taxi5.df)[<span class="fu">names</span>(taxi5.df) <span class="sc">==</span><span class="st">&quot;Freq&quot;</span>] <span class="ot">&lt;-</span><span class="st">&quot;pickups&quot;</span></span>
<span id="cb5-14"><a href="results.html#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="results.html#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="results.html#cb5-16" aria-hidden="true" tabindex="-1"></a>uber5.df<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">table</span>(uber5.h))</span>
<span id="cb5-17"><a href="results.html#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(uber5.df)[<span class="fu">names</span>(uber5.df) <span class="sc">==</span><span class="st">&quot;uber5.h&quot;</span>] <span class="ot">&lt;-</span><span class="st">&quot;Hour&quot;</span></span>
<span id="cb5-18"><a href="results.html#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(uber5.df)[<span class="fu">names</span>(uber5.df) <span class="sc">==</span><span class="st">&quot;Freq&quot;</span>] <span class="ot">&lt;-</span><span class="st">&quot;pickups&quot;</span></span>
<span id="cb5-19"><a href="results.html#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="results.html#cb5-20" aria-hidden="true" tabindex="-1"></a>hour.df<span class="ot">&lt;-</span><span class="fu">rbind</span>(taxi5.df,uber5.df)</span>
<span id="cb5-21"><a href="results.html#cb5-21" aria-hidden="true" tabindex="-1"></a>hour.df<span class="sc">$</span>Type[<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>]<span class="ot">&lt;-</span><span class="st">&quot;Taxi&quot;</span></span>
<span id="cb5-22"><a href="results.html#cb5-22" aria-hidden="true" tabindex="-1"></a>hour.df<span class="sc">$</span>Type[<span class="dv">24</span><span class="sc">:</span><span class="dv">48</span>]<span class="ot">&lt;-</span><span class="st">&quot;Uber&quot;</span></span>
<span id="cb5-23"><a href="results.html#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="results.html#cb5-24" aria-hidden="true" tabindex="-1"></a>hour.df<span class="sc">$</span>Hour<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">levels</span>(hour.df<span class="sc">$</span>Hour))</span>
<span id="cb5-25"><a href="results.html#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="results.html#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="results.html#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>hour.df,<span class="fu">aes</span>(<span class="at">x=</span>Hour,<span class="at">y=</span>pickups, <span class="at">color=</span>Type))<span class="sc">+</span></span>
<span id="cb5-28"><a href="results.html#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb5-29"><a href="results.html#cb5-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb5-30"><a href="results.html#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Hour&quot;</span>,<span class="at">title=</span><span class="st">&quot;the distribution of pick-ups by hour&quot;</span>)<span class="sc">+</span></span>
<span id="cb5-31"><a href="results.html#cb5-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">23</span>, <span class="at">labels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">23</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>In the graph, I plot the distribution of pick-ups by hour of Taxi and Uber data.
One thing is quite counterintuitive is that we all know the launch of Uber nearly
drove the Taxi companies out of the business. But from this graph, we can see that
the number of Taxi pick-ups is much higher than the number of Uber pick-ups in
several time periods in a day.That’s probably because with the increase of demand to
a ride, the price of Uber ride will surge. But Taxi will have a quite stable and
lower price. People will turn to Taxi if the price of Uber is surging and that’s
probably why during some time period, the number of Taxi pick-ups are much higher
than the Uber pick-ups.</p>
<p>They all follow a similar pick-ups distribution after the morning/evening rush hours
(the number of pick-ups for Uber/Taxi all constantly rises/drops).But the pick-up
peak of Taxi always lags behind the peak of Uber. We can see that the increase demand
of Uber pick-up starts at 2am but the increase demand for Taxi pick-up starts at 5am(lag
behind around 3 hours).Uber pick-up hits its first peak at 7am but Taxi pick-up hits
its small peak at 9am. And there are more Uber pick-ups than Taxi pick-ups during the rush
hour, that’s probably because people can more easily find a Uber than Taxi since they
have no choice.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="results.html#cb6-1" aria-hidden="true" tabindex="-1"></a>taxi<span class="fl">.09</span><span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">&quot;https://s3.amazonaws.com/nyc-tlc/trip+data/yellow_tripdata_2009-01.csv&quot;</span>)</span>
<span id="cb6-2"><a href="results.html#cb6-2" aria-hidden="true" tabindex="-1"></a>taxi<span class="fl">.12</span><span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">&quot;https://s3.amazonaws.com/nyc-tlc/trip+data/yellow_tripdata_2012-01.csv&quot;</span>)</span>
<span id="cb6-3"><a href="results.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="results.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb6-5"><a href="results.html#cb6-5" aria-hidden="true" tabindex="-1"></a>sample09 <span class="ot">&lt;-</span><span class="fu">sample_n</span>(taxi<span class="fl">.09</span>,<span class="dv">1000000</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-6"><a href="results.html#cb6-6" aria-hidden="true" tabindex="-1"></a>sample12 <span class="ot">&lt;-</span><span class="fu">sample_n</span>(taxi<span class="fl">.12</span>,<span class="dv">1000000</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-7"><a href="results.html#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="results.html#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="results.html#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#count the pick-ups trip for each day the same month for year 2009,2012,2015</span></span>
<span id="cb6-10"><a href="results.html#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="results.html#cb6-11" aria-hidden="true" tabindex="-1"></a>sample09.d<span class="ot">&lt;-</span><span class="fu">format</span>(<span class="fu">as.Date</span>(sample09<span class="sc">$</span>Trip_Pickup_DateTime,<span class="at">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>), <span class="at">format =</span> <span class="st">&quot;%d&quot;</span>)</span>
<span id="cb6-12"><a href="results.html#cb6-12" aria-hidden="true" tabindex="-1"></a>sample12.d<span class="ot">&lt;-</span><span class="fu">format</span>(<span class="fu">as.Date</span>(sample12<span class="sc">$</span>pickup_datetime,<span class="at">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>), <span class="at">format =</span> <span class="st">&quot;%d&quot;</span>)</span>
<span id="cb6-13"><a href="results.html#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="results.html#cb6-14" aria-hidden="true" tabindex="-1"></a>d09<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">table</span>(sample09.d))</span>
<span id="cb6-15"><a href="results.html#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(d09)[<span class="fu">names</span>(d09) <span class="sc">==</span><span class="st">&quot;sample09.d&quot;</span>] <span class="ot">&lt;-</span><span class="st">&quot;Day&quot;</span></span>
<span id="cb6-16"><a href="results.html#cb6-16" aria-hidden="true" tabindex="-1"></a>d12<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">table</span>(sample12.d))</span>
<span id="cb6-17"><a href="results.html#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(d12)[<span class="fu">names</span>(d12) <span class="sc">==</span><span class="st">&quot;sample12.d&quot;</span>] <span class="ot">&lt;-</span><span class="st">&quot;Day&quot;</span></span>
<span id="cb6-18"><a href="results.html#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="results.html#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="results.html#cb6-20" aria-hidden="true" tabindex="-1"></a>bind2<span class="ot">&lt;-</span><span class="fu">bind_rows</span>(d09, d12)</span>
<span id="cb6-21"><a href="results.html#cb6-21" aria-hidden="true" tabindex="-1"></a>bind2<span class="sc">$</span>Year[<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>]<span class="ot">&lt;-</span><span class="st">&quot;2009&quot;</span></span>
<span id="cb6-22"><a href="results.html#cb6-22" aria-hidden="true" tabindex="-1"></a>bind2<span class="sc">$</span>Year[<span class="dv">32</span><span class="sc">:</span><span class="dv">62</span>]<span class="ot">&lt;-</span><span class="st">&quot;2012&quot;</span></span>
<span id="cb6-23"><a href="results.html#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="results.html#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="results.html#cb6-25" aria-hidden="true" tabindex="-1"></a>bind2<span class="sc">$</span>Day<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">levels</span>(bind2<span class="sc">$</span>Day))</span>
<span id="cb6-26"><a href="results.html#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="results.html#cb6-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-28"><a href="results.html#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>bind2,<span class="fu">aes</span>(<span class="at">x=</span>Day,<span class="at">y=</span>Freq, <span class="at">color=</span>Year))<span class="sc">+</span></span>
<span id="cb6-29"><a href="results.html#cb6-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb6-30"><a href="results.html#cb6-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb6-31"><a href="results.html#cb6-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Day&quot;</span>,<span class="at">y=</span><span class="st">&quot;pick-ups&quot;</span>,<span class="at">title=</span><span class="st">&quot;Number of pick-ups by day for January 2009/2012&quot;</span>)<span class="sc">+</span></span>
<span id="cb6-32"><a href="results.html#cb6-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>, <span class="at">labels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-14-1.png" width="672" />
In 2011, Uber launched in NYC. So in here I want to compare the count of pick-ups
in January 2009(the year before Uber launch) and in the same month of 2012
(the year after Uber launch) to see if the launch of Uber impacted the Taxi business in NYC.
As we can see from this graph, in the first day of January 2012, the pick-ups drops drastically
compared to the same day in 2009.They both have a lot of fluctations, up and downs. At the peak
of 2009 Taxi pick-ups, the pick-ups of 2012 drops, vice versa.But the overall pattern is that
with the launch of Uber, the pick-ups of Taxi decrease.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="results.html#cb7-1" aria-hidden="true" tabindex="-1"></a>arrest_data<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">&quot;https://data.cityofnewyork.us/api/views/8h9b-rp9u/rows.csv?accessType=DOWNLOAD&quot;</span>)</span>
<span id="cb7-2"><a href="results.html#cb7-2" aria-hidden="true" tabindex="-1"></a>arrest_data<span class="ot">&lt;-</span><span class="fu">select</span>(arrest_data,Latitude,Longitude,)</span>
<span id="cb7-3"><a href="results.html#cb7-3" aria-hidden="true" tabindex="-1"></a>arrest_data<span class="ot">&lt;-</span>arrest_data[<span class="sc">!</span><span class="fu">is.na</span>(arrest_data<span class="sc">$</span>Latitude),]</span>
<span id="cb7-4"><a href="results.html#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="results.html#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="results.html#cb7-6" aria-hidden="true" tabindex="-1"></a>map.NY<span class="ot">&lt;-</span> <span class="fu">get_map</span>(<span class="st">&quot;New York&quot;</span> , <span class="at">zoom=</span><span class="dv">10</span>)</span>
<span id="cb7-7"><a href="results.html#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="results.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(map.NY)<span class="sc">+</span></span>
<span id="cb7-9"><a href="results.html#cb7-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">data=</span>arrest_data, <span class="fu">aes</span>(<span class="at">x=</span>Longitude,<span class="at">y=</span>Latitude), <span class="at">color=</span><span class="st">&#39;green&#39;</span>,<span class="at">size=</span><span class="fl">0.005</span>,<span class="at">alpha=</span><span class="fl">0.005</span>)<span class="sc">+</span></span>
<span id="cb7-10"><a href="results.html#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(), <span class="at">axis.text =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb7-11"><a href="results.html#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;&#39;</span>)<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">&#39;&#39;</span>)<span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;NYC Crime Map based on the historical arrest data&quot;</span>)<span class="sc">+</span></span>
<span id="cb7-12"><a href="results.html#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="results.html#cb8-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span><span class="fu">ggmap</span>(map.NY) <span class="sc">+</span> </span>
<span id="cb8-2"><a href="results.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>sample_taxi5, <span class="fu">aes</span>(<span class="at">x=</span>pickup_longitude,<span class="at">y=</span>pickup_latitude), <span class="at">color=</span><span class="st">&#39;blue&#39;</span>,<span class="at">size=</span><span class="fl">0.01</span>,<span class="at">alpha=</span><span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb8-3"><a href="results.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(), <span class="at">axis.text =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb8-4"><a href="results.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;&#39;</span>)<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">&#39;&#39;</span>)<span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;The Count of Yellow Taxi Pick-ups for May 2014&quot;</span>)<span class="sc">+</span></span>
<span id="cb8-5"><a href="results.html#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span>
<span id="cb8-6"><a href="results.html#cb8-6" aria-hidden="true" tabindex="-1"></a>p2<span class="ot">&lt;-</span><span class="fu">ggmap</span>(map.NY) <span class="sc">+</span> </span>
<span id="cb8-7"><a href="results.html#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>uber5, <span class="fu">aes</span>(<span class="at">x=</span>Lon,<span class="at">y=</span>Lat), <span class="at">color=</span><span class="st">&#39;red&#39;</span>,<span class="at">size=</span><span class="fl">0.01</span>,<span class="at">alpha=</span><span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb8-8"><a href="results.html#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(), <span class="at">axis.text =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb8-9"><a href="results.html#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;&#39;</span>)<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">&#39;&#39;</span>)<span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;The Count of Uber Pick-ups for May 2014&quot;</span>)<span class="sc">+</span></span>
<span id="cb8-10"><a href="results.html#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span>
<span id="cb8-11"><a href="results.html#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="results.html#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="results.html#cb8-13" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">+</span>p2</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-15-2.png" width="672" /></p>
<p>In the NYC Crime Map, we can see midtown Manhattan, Harlem, Bronx, Brooklyn and
large area of Queens all have high crime rates. In order to see if the crime
rate is a factor that influences the pick-up of Uber/Taxi(from driver perspective,
because some drivers might take this factor into consideration when they do the
pick-up). From the left graph, Yellow Taxi pick-ups are more concentrated in Manhattan
area and there are only few pick-ups in the Bronx area and the middle part of Brooklyn
(areas with higher crime rate). In the right graph, We can see Uber pick-ups are spread out
everywhere even in these high crime rate areas where Taxi drivers won’t choose to go often.
So from these findings, Uber drivers might consider this factor less important than the
Taxi drivers, but to a extent, crime rate of one area is one of the factors that affect
the number of pick-ups in NYC.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="results.html#cb9-1" aria-hidden="true" tabindex="-1"></a>sample_2021<span class="ot">&lt;-</span>sample_2021[<span class="sc">!</span>sample_2021<span class="sc">$</span>tip_amount<span class="sc">&lt;</span><span class="dv">0</span>,]</span>
<span id="cb9-2"><a href="results.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="results.html#cb9-3" aria-hidden="true" tabindex="-1"></a>sample_2021<span class="sc">$</span>tip.percent <span class="ot">&lt;-</span><span class="fu">round</span>(sample_2021<span class="sc">$</span>tip_amount<span class="sc">/</span>sample_2021<span class="sc">$</span>total_amount,<span class="dv">2</span>)</span>
<span id="cb9-4"><a href="results.html#cb9-4" aria-hidden="true" tabindex="-1"></a>sample_2021<span class="sc">$</span>tip.categories <span class="ot">&lt;-</span><span class="fu">cut</span>(sample_2021<span class="sc">$</span>tip.percent, <span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>,<span class="fl">0.2</span>,<span class="cn">Inf</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;low tips&quot;</span>,<span class="st">&quot;medium tips&quot;</span>,<span class="st">&quot;high tips&quot;</span>),<span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-5"><a href="results.html#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="results.html#cb9-6" aria-hidden="true" tabindex="-1"></a>sample_2021<span class="sc">$</span>tip.categories <span class="ot">&lt;-</span><span class="fu">as.factor</span>(sample_2021<span class="sc">$</span>tip.categories)</span>
<span id="cb9-7"><a href="results.html#cb9-7" aria-hidden="true" tabindex="-1"></a>sample_2021<span class="ot">&lt;-</span>sample_2021[<span class="sc">!</span><span class="fu">is.na</span>(sample_2021<span class="sc">$</span>tip.categories)<span class="sc">==</span><span class="cn">TRUE</span>,]</span>
<span id="cb9-8"><a href="results.html#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="results.html#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sample_2021, <span class="fu">aes</span>(payment_type,<span class="at">fill=</span>tip.categories))<span class="sc">+</span></span>
<span id="cb9-10"><a href="results.html#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;stack&quot;</span>)<span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;payment type&quot;</span>)<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">&quot;count&quot;</span>)<span class="sc">+</span></span>
<span id="cb9-11"><a href="results.html#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;the distribution of tip categories over different payment type&quot;</span>, </span>
<span id="cb9-12"><a href="results.html#cb9-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">subtitle =</span> <span class="st">&quot;1= Credit Card 2= Cash 3= No Charge 4= Dispute&quot;</span>)<span class="sc">+</span></span>
<span id="cb9-13"><a href="results.html#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>In order to see the possible factors that affect the tipping behavior of passengers,
I am ploting the distribution of tip categories over different payment method.
In our data, We have four types of payment type: credit card, cash, no charge and dispute.
From the graph, We can see that when the payment type is credit card, the passengers give
tips in a various range from low to high and in the most situations they can get tips.
But if the payment type is cash, there are only few tips data recorded, this doesn’t mean
that people who pay in cash won’t give a good tip, that’s probably because the data of tip
in cash didn’t state in the data. So from the graph, this payment type method can’t help us
draw a persuasive conclusion that there exists a clear relationship between the tips and payment
type because there are lot of missing data.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="results.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sample_2021,<span class="fu">aes</span>(hour,<span class="at">fill=</span>tip.categories))<span class="sc">+</span> </span>
<span id="cb10-2"><a href="results.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_bar</span>(<span class="at">position =</span><span class="st">&quot;stack&quot;</span>) <span class="sc">+</span>  </span>
<span id="cb10-3"><a href="results.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">xlab</span>(<span class="st">&quot;pick up time&quot;</span>)<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">&quot;count&quot;</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;the distribution of tip categories over different pick-up time period&quot;</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>In this graph, besides considering the payment type as a factor that affect the tipping
behavior of passengers, We want to see if the pick-up time in a day can be one of these
factors. Passengers tend to give generous tips during the evening rush hours(5pm-7pm).
And in the early morning and late night, passengers tend to give low tips.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="results.html#cb11-1" aria-hidden="true" tabindex="-1"></a>map.cu<span class="ot">&lt;-</span> <span class="fu">get_map</span>(<span class="at">location =</span> <span class="fu">c</span>(<span class="at">lon =</span><span class="sc">-</span><span class="fl">73.963036</span>, <span class="at">lat =</span><span class="fl">40.807384</span>) , <span class="at">zoom=</span><span class="dv">17</span>)</span>
<span id="cb11-2"><a href="results.html#cb11-2" aria-hidden="true" tabindex="-1"></a>lon <span class="ot">=</span><span class="fu">c</span>(<span class="sc">-</span><span class="fl">73.9640</span>,<span class="sc">-</span><span class="fl">73.963036</span>)</span>
<span id="cb11-3"><a href="results.html#cb11-3" aria-hidden="true" tabindex="-1"></a>lat <span class="ot">=</span><span class="fu">c</span>(<span class="fl">40.8069</span>,<span class="fl">40.8095</span>)</span>
<span id="cb11-4"><a href="results.html#cb11-4" aria-hidden="true" tabindex="-1"></a>taxi.pickup <span class="ot">&lt;-</span> sample12 <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="results.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pickup_longitude <span class="sc">&gt;</span> lon[<span class="dv">1</span>] <span class="sc">&amp;</span> pickup_longitude <span class="sc">&lt;</span> lon[<span class="dv">2</span>],</span>
<span id="cb11-6"><a href="results.html#cb11-6" aria-hidden="true" tabindex="-1"></a>         pickup_latitude <span class="sc">&gt;</span> lat[<span class="dv">1</span>] <span class="sc">&amp;</span> pickup_latitude <span class="sc">&lt;</span> lat[<span class="dv">2</span>]) </span>
<span id="cb11-7"><a href="results.html#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="results.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(map.cu) <span class="sc">+</span> </span>
<span id="cb11-9"><a href="results.html#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>taxi.pickup,</span>
<span id="cb11-10"><a href="results.html#cb11-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x=</span>pickup_longitude,<span class="at">y=</span>pickup_latitude),<span class="at">size=</span>.<span class="dv">03</span>,<span class="at">alpha=</span><span class="fl">0.3</span>,<span class="at">color=</span><span class="st">&quot;red&quot;</span>)<span class="sc">+</span></span>
<span id="cb11-11"><a href="results.html#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&#39;Taxi Pickups near Columbia University&#39;</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="results.html#cb12-1" aria-hidden="true" tabindex="-1"></a>ny.map <span class="ot">&lt;-</span> <span class="fu">get_map</span>(<span class="st">&quot;Central Park, New York, NY&quot;</span>, <span class="at">color=</span><span class="st">&quot;bw&quot;</span>,<span class="at">zoom=</span><span class="dv">11</span>)</span>
<span id="cb12-2"><a href="results.html#cb12-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggmap</span>(ny.map) <span class="sc">+</span> </span>
<span id="cb12-3"><a href="results.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>taxi.pickup,</span>
<span id="cb12-4"><a href="results.html#cb12-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x=</span>pickup_longitude,<span class="at">y=</span>pickup_latitude),<span class="at">size=</span>.<span class="dv">5</span>,<span class="at">alpha=</span><span class="fl">0.5</span>,<span class="at">color=</span><span class="st">&quot;red&quot;</span>)<span class="sc">+</span></span>
<span id="cb12-5"><a href="results.html#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>taxi.pickup, <span class="fu">aes</span>(<span class="at">x=</span>dropoff_longitude,<span class="at">y=</span>dropoff_latitude), <span class="at">color=</span><span class="st">&quot;blue&quot;</span>,<span class="at">size=</span><span class="fl">0.5</span>,<span class="at">alpha=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb12-6"><a href="results.html#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&#39;Taxi Dropoffs from Columbia University in Blue&#39;</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-18-2.png" width="672" /></p>
<p>I first plot the Taxi pick-ups near Columbia University and then plot the dropoff
locations of these pick-ups in order to see where the people go from Columbia University.
Since I only plot the pick-ups around Columbia University and Banard College, so I am
thinking the most of these pick-up rides are probably requested by Columbia and Banard
students. And maybe the drop-off locations of these rides can act as an indicator about where
the students attend Columbia and Banard live.</p>
<p>In the Taxi dropoffs map, We can see that the most of rides ended at Upper East Side
Upper West Side and the areas that are close to the schools.Few dropoff locations are at
Booklyn and the rest areas in Manhattan, such as West Village and Tribeca.If this is
an indicator about where the students attend Columbia and Banard live, it actually makes a
lot of sense since students prefer to live in the places that are close to the school so that
they won’t waste a lot of time on the commute. And we can see it from the graph, there are
very few people go to the places(like Brooklyn) that are far away from school by Taxi.</p>
<p>```</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="missing-values.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interactive-component.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/leemean123/TaxiNYC/edit/main/05-results.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/leemean123/TaxiNYC/blob/main/05-results.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
